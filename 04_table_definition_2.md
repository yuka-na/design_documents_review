# テーブル定義書2
## 全体
- PKのカラム名が誤り。(問題点)
  - 正しくは全て"id"である。
    - "products&#95;id"や"Cart item&#95;id"などカラム名の命名規則から外れているものもありますが、そもそも"id"なので、PKについてはカラム名の指摘は省略します。
- 税率がない。(問題点)
- 商品の入荷を管理するテーブルがない。(問題点)
- enumを使う場合は、備考欄に具体的な値を書くべきなのでしょうか。※疑問点
  - 書いた方が良いので指摘必要。
- 追加。FK以外のカラム名にそのテーブルのテーブル名は含むべきでない。(問題点)
  - これに伴い、ジャンル名などの指摘は修正。
  - 回りくどい書き方をしたが、shippingsテーブルにshipping_addressカラムはダメで、sellsテーブルにshigging_addressカラムはOKということ。

## admins
- PKのINDEXにチェックがない。(問題点)
- メールアドレス、パスワードのカラム名が不適当。(問題点)
  - admin&#95;email,admin&#95;passwordカラムがあるが、deviseはemailとencrypted&#95;passwordを使ってログインするため、独自カラムを使うには設定の変更が必要になる。

## users
- 名前、名前カナについての問題点3つ
  - 名前(性),名前(性カナ)の漢字間違い。(問題点)
    - x 性 -> o 姓
  - 名前(性)の備考欄に"名前"とあるが何を意味するのか不明瞭。(問題点)
  - lastをl,firstをfに省略している。(問題点)
    - カラム名は一見して分かりやすいことが求められるので省略しない方が適切と思われる。
- メールアドレス、パスワードのカラム名が不適当。(問題点)
  - adminsと同様。
- 退会ステータスのカラム名が不適当。(問題点)
  - カラム名から何のステータスかわかりづらいことが問題。
- 退会ステータスのデータ型がinteger/enumである。(問題点)
  - 備考で"enumで管理"とあるため、データ型の項はintegerだけで十分である。
  - また、退会ステータスのDEFAULT値に"FALSE"とあり、TRUE/FALSEを使うならばbooleanの方が良い。
    - enumで{0: "FALSE", 1: "TRUE"}とするとしても、ビューでTRUE/FALSEを表示させることはおそらくなく、かつ退会の判断基準が0/1なので、そもそもenumにする必要がない。

## ships
- PKのINDEXにチェックがない。(問題点)
- テーブル名~~及び、配送先ID、配送先住所、配送先電話番号、配送先郵便番号のカラム名~~が不適当。
  - shipが"配送先"ではなく"船"にも受け取れるため。特にship_nameだと"船名"になってしまう。
    - 例えばテーブル定義書1のようにshipping(運送/発送)にするなど。
    - カラム名にテーブル名は含むべきでない、とのことなので、こちらはテーブル名に対してのみの指摘に変更。

## products
- ジャケット画像のDEFAULT値が不適当。(問題点)
  - この書き方だと、"画像準備中"という文字列が入ることになる。
    - 言いたいことは"画像準備中"というno-image.jpgをfallbackで指定する、ということと思う。
    - レビューより。fallback指定ならば、NOT NULLにチェックがあることが問題であるので、その指摘も必要。
- シングル名/アルバム名のカラム名が不適当。(問題点)
  - テーブル名の単数形はproductであるが、ここのカラム名ではcdを使っているため、どちらかに統一した方が良いと思われる。
    - カラム名にテーブル名は含むべきでないのでtitleの方が良い。
- 不要なカラム"在庫数"がある。(問題点)
  - 入荷テーブルと購入詳細テーブルの情報から算出するため。
- 不要なカラム"在庫ステータス"がある。(問題点)
  - 今回要件にあるのは"販売ステータス"である。
    - 在庫数があっても、販売停止の場合はあるため、"在庫ステータス"では不十分。
    - なお、文字通りの"在庫ステータス"は、算出した在庫数から在庫あり/なしがわかる。
- 論理削除を考慮していない。(問題点)
  - 削除することはない？

## discs
- 商品IDのカラム名が不適当。(問題点)
  - &#95;idの前は単数形である。
- ディスクNoのカラム名が不適当。(問題点)
  - cart_items、sell_detailsの購入枚数カラムにnumを使っており、紛らわしい。
  - 今言いたいのはディスク順なので、orderなど。
    - こうなるとカラム説明も"ディスク順"と変更する方が良いと思う。

## songs
- PKのカラム説明が不適当。(問題点)
  - テーブル定義書1で指摘しそびれていたが、songは"曲"であり"曲名"ではない。
- 曲名のカラム名が不適当。(問題点)
  - 何が入るか分かりづらいため。例えばtitleなど。
- トラックナンバーについて
  - ディスクNoと同様。cart_items、sell_detailsの購入枚数カラムにnumを使っており、紛らわしい。
    - 省略形を使うべきではなく。省略せずにtrack_numberとすれば通じやすいとは思う。
  - または、今言いたいのは曲順なので、orderなど。
    - こちらの場合は、カラム説明も"曲順"に変更。

## labels
- レーベルのカラム名が不適当。(問題点)
  - カラム名にテーブル名は含むべきでない、かつ何が入るか分かりづらいため。例えばnameなど。

## artists
- アーティスト名のカラム名が不適当。(問題点)
  - カラム名にテーブル名は含むべきでない、かつ何が入るか分かりづらいため。例えばnameなど。

## genres
- ジャンル名のカラム名が不適当。(問題点)
  - カラム名にテーブル名は含むべきでない、かつ何が入るか分かりづらいため。例えばnameなど。

## cart items
- PKのINDEXにチェックがない。(問題点)
- テーブル名が不適当。(問題点)
  - スペースを入れるのではなく、スネークケースを使う。
- 商品IDのカラム名が不適当。(問題点)
- 購入枚数のカラム名が不適当。(問題点)
  - テーブル名と同じくスネークケースが適切。
  - 加えて、省略形numを使うべきではない。

## sell_details
- 購入詳細IDのカラム説明が管理者視点になっていない。(問題点)
  - "購入"ではなく、created&#95;at,updated&#95;atのカラム説明で使われている"販売"が適当。
- 商品IDのカラム名が不適当。(問題点)
- 商品IDのFKにチェックが入っていない。(問題点)
- 購入枚数のカラム名が不適当。(問題点)
- 購入枚数のカラム説明が管理者視点になっていない。(問題点)
- 購入IDがない。(問題点)
- 購入時の商品価格を保存するカラムがない。(問題点)
  - 他にも、販売後に変わって欲しくない情報(商品名など)についてはカラムが必要であることの指摘をする。

## sells
- PKのINDEXにチェックがない。(問題点)
- カラム説明が管理者視点になっていない。(問題点)
  - sell_detailsと同じく、"購入"ではなく"販売"が適当。
- 不要なカラム"購入詳細ID"がある。(問題点)
  - 現在の購入詳細は、購入の子である。
- 支払い方法のenumの具体的な値が記載されていない。(問題点)
- 送付先住所のカラム説明が不適当。(問題点)
  - ここだけ"送付先"という別名を使う必要なない。またshipsでは"配送先住所"としている。
- 送付先住所、配送先電話番号、配送先郵便番号、宛名、送料のカラム名が不適当。(問題点)
  - shipsでの指摘と同様。shipping_~とするなど。
- 支払い合計のカラム名が不適当。(問題点)
  - totalでは何の合計かわからない。total_priceなど。
- 配送ステータスがない。(問題点)


# 注意
* マークダウン形式で記入してください。
* 全体を通しての指摘事項の場合、テーブル名の部分を「全体」「共通」などとしてください。
**担当者レビュー**
合格です！
