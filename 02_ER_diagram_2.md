# ER図2
## 全体
- 税率がない。(問題点)
- 商品の入荷を管理するテーブルがない。(問題点)

## 管理者
- PKがない。(問題点)
- リレーション不要なテーブル エンドユーザ,商品 にリレーションがある。(問題点)

## エンドユーザ
- PK名が誤り。正しくは"エンドユーザID"。(問題点)
- 漢字の名前を保存する"名"カラムがない。(問題点)
- 別の住所に送ることを考えていない。(問題点)

## 曲名
- ディスクとの関係が逆なので、ディスクIDが必要。(問題点)
  - 加えて、"シングルアルバム内の曲名"カラムは、"ディスク内の曲名"カラムが適切。
- 曲順を管理するカラムがない。(問題点)

## ディスク
- 曲名との関係が逆なので、曲名IDが不要。(問題点)
- 商品との関係が逆なので、商品IDが必要。(問題点)
- ここだけ"更新日"と"登録日"の上下が逆である。
  - レビュー不要。
- 不要なカラム"トラックNo,"がある。(問題点)
  - これを持つべきは曲名テーブルである。

## ジャンル
- 紐づく商品を必ず1個以上もつことになっている。(問題点)
- "ジャンル"カラムが具体的にどのような値を持つか分からない。(問題点)
  - "ジャンル名"が適当。

## レーベル
- 紐づく商品を必ず1個以上もつことになっている。(問題点)
- "レーベル"カラムが具体的にどのような値を持つか分からない。(問題点)
  - "レーベル名"が適当。

## アーティスト
- 紐づく商品を必ず1個以上もつことになっている。(問題点)
- 同じ商品の親であるジャンル、レーベルと比較し、ここのカラムだけ"名"がついている。
  - "名"あり/なしの統一をした方が良いのではないか。(問題点)
    - レビューより。"名"あり一択である。ジャンル、レーベルに指摘を追加。

## 商品
- ディスクとの関係が逆なので、ディスクIDが不要。(問題点)
  - ディスクが子になるので、"ディスク枚数"カラムも不要になる。
- 紐づくカートアイテムを必ず1個以上もつことになっている。(問題点)
- 不要なカラム"在庫数"がある。(問題点)
  - 入荷テーブルと購入詳細テーブルの情報から算出するため。
- "ステータス(取り扱い)"カラムが具体的にどのような値を持つか分からない。(問題点)
  - カラム名が曖昧なことが問題。例えば"販売ステータス"など。
  - 論理削除を考慮していないが、これに論理削除ステータスを兼ねさせることも可能。
- 発売日カラムがない。(問題点)

## カートアイテム
- PKがない。(問題点)
- FK"ユーザーID"の名前が誤り。正しくは"エンドユーザID"。(問題点)
- 不要なカラム"小計金額"がある。(問題点)
  - "購入枚数"と、対応する商品の"税別価格"で算出できる。

## 購入
- テーブル名が管理者視点になっていない。(問題点)
- FK"ユーザーID"の名前が誤り。正しくは"エンドユーザID"。(問題点)
- 購入詳細との関係が逆なので、購入詳細IDが不要。(問題点)
  - 1:(0以上のN)ではなく1:(1以上のN)が正しいので、繋ぐ線は現在の曲名-ディスク間のものが適切。
- 配送ステータスがない。(問題点)
- 不要なカラム"購入日"がある。(問題点)
  - created_atでわかるため。
- 送付先の宛名、郵便番号を保存するカラムがない。(問題点)

## 購入詳細
- テーブル名が管理者視点になっていない。(問題点)
- 購入との関係が逆なので、購入IDが必要。(問題点)
- 商品とのリレーションがない。(問題点)
- 不要なカラム"小計金額"がある。(問題点)
  - 購入時の商品の税別価格を保存する、例えば"商品価格"カラムを追加し、それと"購入枚数"から算出する方が良い。

**担当者レビュー**(残しておいてください)
合格です！！