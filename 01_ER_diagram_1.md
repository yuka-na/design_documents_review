# ER図1
## 全体
- ActiveRecordでデフォルトで作られる登録日、更新日がない。(問題点)
- 税率、送料がない。(問題点)
- 商品の入荷を管理するテーブルがない。(問題点)
- 購入詳細を管理するテーブルがない。(問題点)

## 管理人
- リレーション不要なテーブル エンドユーザ,商品 にリレーションがある。(問題点)

## エンドユーザ
- 論理削除を考慮していない。(問題点)
- 別の住所に送ることを考えていない。(問題点)

## 商品
- アーティスト名が手打ちだと、同じアーティストでも複数の表記があったり、打ち間違いで別物になってしまう恐れがある。(問題点)
  - レーベル名、ジャンルも同様です。
- 論理削除を考慮していない。(問題点)
- 複数ディスクがある場合を想定していない。(問題点)
- 不要なカラム"シングルアルバム内の曲名"がある。(問題点)
  - ディスク内に曲があるので、商品(親)>ディスク(子)>曲名(孫)になる。
- "ステータス(取り扱い)"カラムが具体的にどのような値を持つか分からない。(問題点)
  - カラム名が曖昧なことが問題。例えば"販売ステータス"など。
- 不要なカラム"在庫数"がある。(問題点)
  - 入荷テーブルと購入詳細テーブルの情報から算出するため。

## カート
- テーブル名とPK"注文ID"があっていない。(問題点)
- 決済との関係が1:Nになっている。(問題点)
  - 決済側のFKが"注文ID"になっている。
- テーブル名と実際の役割が異なる。
  - "商品ID"をもっているので、これはカートの中の商品1つ1つ => カート内商品
- エンドユーザとのリレーションがない。(問題点)
- カートを削除した際、決済レコードに影響が出てしまう。
 - 削除しない場合は、購入後もカートに残り続けるのでこちらも問題。(問題点)
- 不要なカラム"合計金額"がある。
  - "購入枚数"と、対応する商品の"税別価格"で算出できる。
- 不要なカラム"アーティスト名","ジャケット画像","シングル/アルバム名"がある。(問題点)
  - 対応する商品から取得可能である。

## 決済
- テーブル名と機能が異なっている。(問題点)
  - 「決済」はお金を支払うだけである。
- 購入履歴との関係が1:Nになっている。(問題点)
  - 1購入1履歴であることをレビュー。
- "ステータス(配送状況)"カラムをもつべきである。(問題点)
  - 購入履歴とのリレーション誤解に因るもの。
- 1回の注文で複数種類を購入したとき、それが"1回の注文である"と判別できる材料がない。(問題点)
  - 同じ日に複数回決済する場合を考えると、"購入日"ではできない。
- 不要なカラム"購入日"がある。(問題点)
  - created_atでわかるため。
- 送付先の宛名、郵便番号を保存するカラムがない。(問題点)
- 合計金額を保存するカラムがない。(問題点)

## 購入履歴
- PKが空欄である。(問題点)
- このテーブル自体不要である。(問題点)
  - 要件内の"購入履歴"を素直に受け取ったと思われる。
  - 決済の方のリレーションでレビュー予定。

**研修担当レビュー**
<font color="Red">再提出の際はこのレビューを残しておいてください。</font>
# フィードバック1回目
[add]→付け加えなければいけないところ
[fix]→修正が必要なところ
[comment]→その他コメント（修正ではないけど、確認して欲しいポイントです

## 全体
- [add]→受注明細がない。
- [add]→入荷テーブルがない。

## 管理人
- [comment]→エンドユーザテーブル、商品テーブルのそれぞれで不要な管理人IDがあることを問題としてあげていますが、管理人テーブルに関して「"リレーション不要なテーブル"に対してリレーションがある」という指摘でも大丈夫です。

## 商品
- [add]→曲名カラムがある。
- [add]→ステータスが何を意味しているか不明。
- [add]→在庫数カラムがある。（在庫数は入荷と売上から算出する）

## カート
- [add]→テーブル名が実際の役割と異なる(= カート内商品のはず)
- [add]→合計金額をもっている(= 算出できる)
- [add]→カラムとして必要のないカラムがある。(アーティスト名、ジャケット画像、シングル/アルバム名)
- [add]→エンドユーザと直接リレーションがない。

## 決済
- [add]→テーブル名と機能が異なっている。
- [add]→購入日カラムを持っている。
- [add]→送付先住所カラムがあるが、宛名と郵便番号がない。
- [add]→合計金額カラムがない。
