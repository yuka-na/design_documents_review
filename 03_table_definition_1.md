﻿﻿﻿﻿﻿# テーブル定義書1## 全体- テーブル名が大文字始まりになっている。 >テーブル名、カラム名はキャメルケースではなく、スネークケースにしてください。- カラム名にテーブル名が含まれてしまっている。 >カラム名に自身のテーブル名を含まないようしてください。- 単語の省略形が使われている。 >略語を使わないようにしましょう。- 登録日時と更新日時のカラム説明が全てユーザになっている。 >登録日時と更新日時のカラム説明が全てユーザになっています。- PKのカラム名は全てid。 >railsでは、主キーを'id'と前提した使用になってます。- 入荷テーブル、配送先テーブルがない。 >入荷テーブル、配送先テーブルがありません。## admin- PKがない。 >主キーがありません。- idのカラムにindex,auto incrementの○がない。 >idはindex,auto incrementではないのでしょうか。もし違うならば理由を教えてください。- テーブル名が単数形になっている。 >テーブル名は複数形にしましょう。## users- 名前のカラムもnot nullにした方がよい。 >名前はnot nullにしなくてもよいのでしょうか。- 退会ステータスの型がstringになっている。 >退会ステータスには何種類のデータが入ることが想定されるでしょうか。 「enum」で調べてみてください。- 郵便番号、電話番号の型がintegerになっており、0から始まるものの登録ができない。 >電話番号、郵便番号には0始まりがあります。integerは数値型のため、先頭に0を持つことができません。- 単語の省略形が使われている。 >略語を使わないようにしましょう。- 退会ステータに対してmember_statusというカラム名は本来の意味を表現できていない。 >member_statusという名前だと、何に関してのステータスかわかりません。## products- 名前のカラムもnot nullにした方がよい。 >商品名はnot nullにしなくてもよいのでしょうか。- notaxのnoとtaxがくっついている。 >単語と単語の間はアンダーバーでつなぎましょう。- 在庫ステータスの型がstringになっている。 >在庫ステータスには何種類のデータが入ることが想定されるでしょうか。 「enum」で調べてみてください。- disc_id、genre_id、label_id、artist_idがFKになっていない。 >他のテーブルを引っ張ってくるためのidはFKとなります。- ジャケット画像のtext型で初期値の設定は不可能。 >text型で初期値の設定はできません。- 在庫数のカラムはいらない。 >在庫数カラムがありますが、商品が入荷するたびに数値を変更するのでしょうか。- disc_idはいらない。 >discテーブルとをつなぐFKはdiscテーブルが持つのでdisc_idは必要ありません。- 在庫ステータスは在庫数がわかればわかるのでいらない。 >在庫ステータスは在庫数で判別できないでしょうか。- ジャケット画像はnot nullでなくてよい。 >ジャケット画像はfallbackが使えることを考えると、not nullである必要はありますか。## discs- products_idではなくproduct_id。 >products_idではなくproduct_idになります。- PKのindexの○がない。 >主キーはindexになります。- トラックNo.ではなくディスク番号を管理するカラムにする。 >トラックNo.は曲順を表すものです。これはdiscテーブルに必要でしょうか。## songs- 曲順を管理するカラムがない。 >曲順管理はどのように行いますか。- PKがない。 >主キーがありません。- songというカラム名では何を示しているかわからない。 >カラム名に自身のテーブル名を含まないようしてください。- 曲名のデータ型がintegerになっている。 >曲名のデータ型がintegerになっています。曲名のデータは文字列ではないでしょうか。## labels- 商品IDを持たない。 >productsテーブルとをつなぐFKはproductsテーブルが持つのでproduct_idは必要ありません。- PKがない。 >主キーがありません。- レーベルというカラム説明では何を示しているかわからない。 >レーベルというカラム説明では何を示しているかわかりません。具体的に書きましょう。 - labelというカラム名では何を示しているかわからない。 >カラム名に自身のテーブル名を含まないようしてください。- カラム名にテーブル名が含まれてしまっている。 >カラム名に自身のテーブル名を含まないようしてください。## artists- PKがない。 >主キーがありません。- 商品IDをもたない。 >productsテーブルとをつなぐFKはproductsテーブルが持つのでproduct_idは必要ありません。- アーティスト名のデータ型がintegerになっている。 >アーティスト名のデータ型がintegerになっています。アーティスト名のデータは文字列ではないでしょうか。- カラム名にテーブル名が含まれてしまっている。 >カラム名に自身のテーブル名を含まないようしてください。## genres- PKがない。 >主キーがありません。- テーブル名は複数形。 >テーブル名は複数形にしましょう。- 商品IDをもたない。 >productsテーブルとをつなぐFKはproductsテーブルが持つのでproduct_idは必要ありません。- ジャンル名のデータ型がintegerになっている。 >ジャンル名のデータ型がintegerになっています。ジャンル名のデータは文字列ではないでしょうか。- カラム名にテーブル名が含まれてしまっている。 >カラム名に自身のテーブル名を含まないようしてください。## cart_items- テーブル名は複数形。 >テーブル名は複数形にしましょう。- PKがない。 >主キーがありません。- products_idではなくproduct_id。 >productsidではなくproductidになります。- buy numのように文字と文字の間はあけてはいけない。 >単語と単語の間はアンダーバーでつなぎましょう。- 小計のカラムは算出できるのでいらない。 >小計は他のカラムから算出できないでしょうか。- テーブル名に置いて、単語と単語の間はアンダーバーで連結する。 >単語と単語の間はアンダーバーでつなぎましょう。## buy_details- buy numのように文字と文字の間はあけてはいけない。 >単語と単語の間はアンダーバーでつなぎましょう。- 商品IDがない。 >商品テーブルとをつなぐためのFKが足りません。- buyテーブルに対するFKがない。 >buyテーブルとをつなぐためのFKが足りません。- テーブル名は管理者側の視点で命名しなければならない。 >テーブル名は管理者側からみた名前にしてください。- テーブル名がちゃんとした単語になっていない。 >Buy_detailsだと買う詳細になってしまいます。きちんとした単語にしましょう。## buy- テーブル名は名詞の方がよい。 >テーブル名は名詞にしましょう。- 購入詳細idはいらない。 >buy_detailsテーブルとをつなぐFKはbuy_detailsテーブルが持つのでbuy_detail_idは必要ありません。- payはエンドユーザー側からから見た名前なので管理者側からみた命名にする。 >payはエンドユーザー側からから見た名前なので管理者側からみた命名にしましょう。- 支払方法の型は、3つ以上選択肢があるならintegerがよい。 >支払方法には何種類のデータが入ることが想定されるでしょうか。 「enum」で調べてみてください。- 支払合計のカラム名が正しくない。 >Stockというカラム名は支払合計に適しているでしょうか。- 購入日のカラムはいらない。 >購入日と登録日とに差異はあるのでしょうか。- 配送ステータス、送付先氏名、送付先郵便番号、消費税のカラムがない。 >配送ステータス、送付先氏名、送付先郵便番号、消費税のカラムがありません。- テーブル名は管理者側の視点で命名しなければならない。 >テーブル名は管理者側からみた名前にしてください。# 注意* マークダウン形式で記入してください。* 全体を通しての指摘事項の場合、テーブル名の部分を「全体」「共通」などとしてください。# 研修担当レビュー**再提出の際は、レビューを残しておいて下さい**【フィードバック】[add]→付け加えなければいけないところ[fix]→修正が必要なところ[comment]→その他コメント## Users- 略語を使ってはいけないことを言及したほうが良いです。- カラム名と格納する値が明確に対応していないカラムがあります。  ## Products- 余計な外部キーはありませんか。- 他のカラムと意味が重複するカラムはありませんか。[add]→fallbackでno_imageの画像を呼び出せばいいので、image_idは必ずしもnot null出なくてもいいかも[fix]→「ジャケット画像のデフォルトは文ではなくno_image.jpgのような画像の方がよい」文と言ってしまうと分かりにくい。問題はデータ型textは適切かどうか。## artists- artistというカラム名では何を示しているかわからない。[add]→正直、推察することはできる。つまるところ、テーブル名とカラム名に同じ言葉が含まれていることがよくない点。理由としては、viewページでカラムデータを引っ張ってくる際、Aritst.artistsなど書くことになるが、この同じ言葉の連続がコードの可読性の低下に繋がるため。## genres- genreというカラム名では何を示しているかわからない。[add]→正直、推察することはできる。以下、上と同文。## cart_items- テーブル名は複数形。[add]→かつ、アンダーバーで連結する。## buy_details[add]→テーブルの命名を考え直す必要あり。（直訳で「買う詳細」になっている）## buy- テーブル名は名詞の方がよい。[add]→命名規則的に設計は「管理者側の視点」で行う。- payは動詞なので名詞にする。[fix]→一応、名詞の意味もあるが、「給料」という意味になってしまう。また、名詞になってしまうこともよくないが、あくまでも命名は「管理者側の視点」で行う。という原則が守られていないことがよくない点。