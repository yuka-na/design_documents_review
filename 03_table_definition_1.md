# テーブル定義書1
## 全体
- テーブル名に大文字、単数形、スペースを含んでいる。(問題点)
  - 命名規則として、小文字複数形、キャメルケースである。
  - 以下、あえてテーブル名はそのままにします。
- PKのカラム名が誤り。(問題点)
  - 正しくは全て"id"である。
- created&#95;at, updated&#95;atが全て"ユーザ登録日時"になっている。(問題点)
- 税率がない。(問題点)
- 商品の入荷を管理するテーブルがない。(問題点)

## Admin
- 管理者IDのPK、AUTO INCREMENT, INDEXにチェックがない。(問題点)
- メールアドレス、パスワードのカラム名が不適当。(問題点)
  - admin&#95;email,admin&#95;passwordカラムがあるが、deviseはemailとencrypted&#95;passwordを使ってログインするため、独自カラムを使うには設定の変更が必要になる。

## Users
- 名前、名前カナについて2つ問題点がある。
  - "名前(性)","名前(性カナ)"の漢字間違い。(問題点)
    - x 性 -> o 姓
  - lastをl,firstをfに省略している。(問題点)
    - カラム名は一見して分かりやすいことが求められるので省略しない方が適切と思われる。
- 電話番号のデータ型がintegerである。(問題点)
  - 0から始まった場合、その0は消えてしまう。
- メールアドレス、パスワードのカラム名が不適当。(問題点)
  - Adminと同様。
- 退会ステータスのカラム名が不適当。(問題点)
  - テーブル名の単数形はuserであるが、ここのカラム名ではmemberを使っているため、どちらかに統一した方が良いと思われる。
- 退会ステータスのデータ型がstringである。(問題点)
  - DEFAULTを"FALSE"にしているので、booleanではないか。
- 不要なカラム"配送先住所"がある。(問題点)
  - 1カラム1データが妥当であるため、1つしか登録できない。

## Products
- 不要なカラム"ディスクID"がある。(問題点)
  - ディスクは商品の子である。
- ジャンルID, レーベルID, アーティストIDのFLにチェックがない。(問題点)
- ジャケット画像のカラム名が不適当。(問題点)
  - refileの画像保存用と思われるが、カラムには"&#95;id"が必要。
  - テーブル名の単数形はproductであるが、ここのカラム名ではcdを使っているため、どちらかに統一した方が良いと思われる。
- シングル名/アルバム名も同様。(問題点)
  - 上記ジャケット画像と同様。
- ジャケット画像のNOT NULLにチェックが入っている。(問題点)
- ジャケット画像のDEFAULTが不適当。(問題点)
  - この書き方だと、"画像準備中"という文字列が入ることになる。
    - 言いたいことは"画像準備中"というno-image.jpgをfallbackで指定する、ということと思う。
- 不要なカラム"在庫数"がある。(問題点)
  - 入荷テーブルと購入詳細テーブルの情報から算出するため。
- 不要なカラム"在庫ステータス"がある。(問題点)
  - 今回要件にあるのは"販売ステータス"である。
    - 在庫数があっても、販売停止の場合はあるため、"在庫ステータス"では不十分。
    - なお、文字通りの"在庫ステータス"は算出した在庫数から、在庫ありorなしがわかる。
- 論理削除を考慮していない。(問題点)
  - 削除することはない？

## Discs
- 商品IDのカラム名が不適当。(問題点)
  - &#95;idの前は単数形である。
- 不要なカラム"トラックNo."がある。(問題点)
  - これを持つべきは曲名テーブルである。
  - 代わりにディスク順を保存するカラムが必要。

## Songs
- PKがない。(問題点)
- ディスクIDのAUTO INCREMENTにチェックがついている。(問題点)
- 曲名のデータ型がintegerになっている。(問題点)
- 曲順を保存するカラムがない。(問題点)

## Labels
- PKがない。(問題点)
- 商品IDのカラム名が不適当。(問題点)
- レーベルのカラム説明が不適当。(問題点)
  - "レーベル名"が適当。

## Artists
- PKがない。(問題点)
- 商品IDのカラム名が不適当。(問題点)
- 商品IDのAUTO INCREMENT, INDEXにチェックがついている。(問題点)
- アーティスト名のデータ型がintegerになっている。(問題点)

## Genre
- PKがない。(問題点)
- 商品IDのカラム名が不適当。(問題点)
- 商品IDのAUTO INCREMENT, INDEXにチェックがついている。(問題点)
- ジャンル名のデータ型がintegerになっている。(問題点)

## Cart Item
- PKがない。(問題点)
- ユーザーIDのAUTO INCREMENT, INDEXにチェックがついている。(問題点)
- 商品IDのカラム名が不適当。(問題点)
- 商品IDのデータ型が空である。(問題点)
- 不要なカラム"小計金額"がある。(問題点)
  - "購入枚数"と、対応する商品の"税別価格"で算出できる。

## Buy details
- テーブル名が管理者視点になっていない。(問題点)
  - buyは購入なのでエンドユーザ視点である。
- 商品IDがない。(問題点)
- 不要なカラム"小計金額"がある。(問題点)
  - 購入時の商品の税別価格を保存する、例えば"商品価格"カラムを追加し、それと"購入枚数"から算出する方が良い。
    - readme最新版に"購入価格"とありました。

## Buy
- テーブル名が管理者視点になっていない。(問題点)
- 不要なカラム"購入詳細ID"がある。(問題点)
  - 現在の購入詳細は、購入の子である。
- 支払い方法のカラム説明が不適当。(問題点)
  - 管理者視点になっていない。
- 支払い方法のデータ型がstringである。(問題点)
  - "代引き","銀行振込","クレジットカード"の3つしかないのでenumの方が適切。
- 支払い合計のカラム説明が不適当。(問題点)
  - 管理者視点になっていない。
- 支払い合計のカラム名が不適切。(問題点)
  - stockは在庫である。
- 送付先の宛名、郵便番号を保存するカラムがない。(問題点)
- 配送ステータスがない。(問題点)
- 不要なカラム"購入日"がある。(問題点)
  - created&#95;atでわかるため。
  
**研修担当レビュー**
<font color="Red">再提出の際はこのレビューを残しておいてください。</font>

## 全体
- テーブル名に関して、スネークケースでの指摘がありますが、カラム名についても同様です。
  - buy周りの`buy num`などで、その指摘ができるとよいです。
- テーブル名をそのままカラム名にしている箇所があります。次のような指摘ができるとよいです。
  - 例えば、Genreにgenreというカラムが合ったとして、カラム名からgenreの何を意味したものかわかりません。
  
## Users
- 退会ステータスの命名について。
  - member_statusだと、Userの何の状態を示したものかわからないことを言及して欲しい。
- 郵便番号のデータ型について言及が欲しいです。

## Discs
- products_idとあるが、外部キーは`単数形_id`です。
